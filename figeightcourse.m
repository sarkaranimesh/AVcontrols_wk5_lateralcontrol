function [allData, scenario, sensor] = figeightcourse()
%figeightcourse - Returns sensor detections
%    allData = figeightcourse returns sensor detections in a structure
%    with time for an internally defined scenario and sensor suite.
%
%    [allData, scenario, sensors] = figeightcourse optionally returns
%    the drivingScenario and detection generator objects.

% Generated by MATLAB(R) 9.9 (R2020b) and Automated Driving Toolbox 3.2 (R2020b).
% Generated on: 01-Mar-2021 22:47:03

% Create the drivingScenario object and ego car
[scenario, egoVehicle] = createDrivingScenario;

% Create all the sensors
sensor = createSensor(scenario);

allData = struct('Time', {}, 'ActorPoses', {}, 'ObjectDetections', {}, 'LaneDetections', {}, 'PointClouds', {});
running = true;
while running
    
    % Generate the target poses of all actors relative to the ego vehicle
    poses = targetPoses(egoVehicle);
    time  = scenario.SimulationTime;
    
    % Generate detections for the sensor
    laneDetections = [];
    ptClouds = [];
    [objectDetections, numObjects, isValidTime] = sensor(poses, time);
    objectDetections = objectDetections(1:numObjects);
    
    % Aggregate all detections into a structure for later use
    if isValidTime
        allData(end + 1) = struct( ...
            'Time',       scenario.SimulationTime, ...
            'ActorPoses', actorPoses(scenario), ...
            'ObjectDetections', {objectDetections}, ...
            'LaneDetections', {laneDetections}, ...
            'PointClouds',   {ptClouds}); %#ok<AGROW>
    end
    
    % Advance the scenario one time step and exit the loop if the scenario is complete
    running = advance(scenario);
end

% Restart the driving scenario to return the actors to their initial positions.
restart(scenario);

% Release the sensor object so it can be used again.
release(sensor);

%%%%%%%%%%%%%%%%%%%%
% Helper functions %
%%%%%%%%%%%%%%%%%%%%

% Units used in createSensors and createDrivingScenario
% Distance/Position - meters
% Speed             - meters/second
% Angles            - degrees
% RCS Pattern       - dBsm

function sensor = createSensor(scenario)
% createSensors Returns all sensor objects to generate detections

% Assign into each sensor the physical and radar profiles for all actors
profiles = actorProfiles(scenario);
sensor = visionDetectionGenerator('SensorIndex', 1, ...
    'SensorLocation', [3.7 0], ...
    'MaxRange', 100, ...
    'DetectorOutput', 'Objects only', ...
    'Intrinsics', cameraIntrinsics([1814.81018227767 1814.81018227767],[320 240],[480 640]), ...
    'ActorProfiles', profiles);

function [scenario, egoVehicle] = createDrivingScenario
% createDrivingScenario Returns the drivingScenario defined in the Designer

% Construct a drivingScenario object.
scenario = drivingScenario;

% Add all road segments
%r = 10
roadCenters_x =[16.6906507650175;17.0587235678481;17.4247234105565;17.7882817623254;18.1490325507122;18.5066125302525;18.8606616482176;19.2108234071573;19.5567452238621;19.8980787843853;20.2344803947650;20.5656113270950;20.8911381605954;21.2107331173384;21.5240743922936;21.8308464773578;22.1307404790454;22.4234544295175;22.7086935906385;22.9861707507516;23.2556065138774;23.5167295810416;23.7692770234499;24.0129945472354;24.2476367495106;24.4729673654677;24.6887595062768;24.8947958875441;25.0908690480985;25.2767815588879;25.4523462217729;25.6173862580201;25.7717354863027;25.9152384900315;26.0477507738460;26.1691389091090;26.2792806682579;26.3780651478775;26.4653928803705;26.5411759341127;26.6053380019929;26.6578144782474;26.6985525235129;26.7275111180311;26.7446611029520;26.7499852096945;26.7434780773344;26.7251462580025;26.6950082102869;26.6530942806469;26.5994466728567;26.5341194055101;26.4571782576274;26.3687007024228;26.2687758292944;26.1575042541190;26.0349980179409;25.9013804741555;25.7567861643030;25.6013606825968;25.4352605293221;25.2586529532535;25.0717157832498;24.8746372491952;24.6676157924677;24.4508598661259;24.2245877250141;23.9890272059979;23.7444154985526;23.4909989059325;23.2290325971653;22.9587803501180;22.6805142858951;22.3945145948356;22.1010692543852;21.8004737391276;21.4930307232661;21.1790497758569;20.8588470490991;20.5327449599960;20.2010718657090;19.8641617329291;19.5223538016015;19.1759922433392;18.8254258148716;18.4710075068759;18.1130941885454;17.7520462482528;17.3882272306691;17.0220034707055;16.6537437246449;16.2838187988353;15.9126011763200;15.5404646417780;15.1677839051550;14.7949342243619;14.7949342243619;14.4222910274222;14.0502295344476;13.6791243798232;13.3093492349825;12.9412764321519;12.5752765894435;12.2117182376746;11.8509674492878;11.4933874697475;11.1393383517824;10.7891765928427;10.4432547761379;10.1019212156147;9.76551960523500;9.43438867290495;9.10886183940462;8.78926688266161;8.47592560770645;8.16915352264223;7.86925952095464;7.57654557048247;7.29130640936154;7.01382924924840;6.74439348612257;6.48327041895841;6.23072297655010;5.98700545276462;5.75236325048938;5.52703263453230;5.31124049372317;5.10520411245590;4.90913095190146;4.72321844111210;4.54765377822707;4.38261374197992;4.22826451369730;4.08476150996847;3.95224922615395;3.83086109089097;3.72071933174209;3.62193485212246;3.53460711962947;3.45882406588727;3.39466199800713;3.34218552175262;3.30144747648708;3.27248888196889;3.25533889704801;3.25001479030550;3.25652192266556;3.27485374199749;3.30499178971314;3.34690571935314;3.40055332714326;3.46588059448995;3.54282174237255;3.63129929757717;3.73122417070564;3.84249574588097;3.96500198205908;4.09861952584452;4.24321383569698;4.39863931740318;4.56473947067788;4.74134704674646;4.92828421675018;5.12536275080485;5.33238420753230;5.54914013387407;5.77541227498594;6.01097279400208;6.25558450144744;6.50900109406750;6.77096740283466;7.04121964988196;7.31948571410490;7.60548540516441;7.89893074561476;8.19952626087241;8.50696927673390;8.82095022414305;9.14115295090089;9.46725504000395;9.79892813429104;10.1358382670709;10.4776461983985;10.8240077566608;11.1745741851284;11.5289924931241;11.8869058114546;12.2479537517472;12.6117727693309;12.9779965292945;13.3462562753551;13.7161812011647;14.0873988236800;14.4595353582220;14.8322160948450;15.2050657756381;15.1025367921059;15.4752741925750;15.8475330322194;16.2189384779427;16.5891165559436;16.9576945282764;17.3243012681659;17.6885676337009;18.0501268395289;18.4086148261776;18.7636706266324;19.1149367297987;19.4620594404865;19.8046892355502;20.1424811158298;20.4750949535353;20.8021958347264;21.1234543965431;21.4385471588454;21.7471568499311;22.0489727260008;22.3436908840514;22.6310145678797;22.9106544668915;23.1823290074127;23.4457646362097;23.7006960959349;23.9468666922179;24.1840285521352;24.4119428737973;24.6303801668018;24.8391204833106;25.0379536395193;25.2266794272938;25.4051078157636;25.5730591426661;25.7303642952518;25.8768648805663;26.0124133849383;26.1368733225140;26.2501193726863;26.3520375062821;26.4425251003800;26.5214910416432;26.5888558180625;26.6445515990182;26.6885223035800;26.7207236569758;26.7411232351722;26.7497004975231;26.7464468074525;26.7313654411505;26.7044715842745;26.6657923166587;26.6153665850469;26.5532451638765;26.4794906041526;26.3941771704652;26.2973907662101;26.1892288470922;26.0698003229957;25.9392254483207;25.7976357008976;25.6451736496002;25.4819928107903;25.3082574937404;25.1241426351879;24.9298336231886;24.7255261104467;24.5114258173092;24.2877483246226;24.0547188566619;23.8125720543481;23.5615517389854;23.3019106667532;23.0339102742024;22.7578204150109;22.4739190882637;22.1824921585317;21.8838330680298;21.5782425411459;21.2660282816369;20.9475046627967;20.6229924109095;20.2928182823051;19.9573147343435;19.6168195906579;19.2716757009956;18.9222305959968;18.5688361372611;18.2118481630525;17.8516261300004;17.4885327511574;17.1229336307778;16.7551968961854;16.3856928271003;16.0147934827984;15.6428723274797;15.2703038542212;14.8974632078941;14.7949342243619;14.4222910274222;14.0502295344476;13.6791243798232;13.3093492349825;12.9412764321519;12.5752765894435;12.2117182376746;11.8509674492878;11.4933874697475;11.1393383517824;10.7891765928427;10.4432547761379;10.1019212156147;9.76551960523500;9.43438867290495;9.10886183940462;8.78926688266161;8.47592560770645;8.16915352264223;7.86925952095464;7.57654557048247;7.29130640936154;7.01382924924840;6.74439348612257;6.48327041895841;6.23072297655010;5.98700545276462;5.75236325048938;5.52703263453230;5.31124049372317;5.10520411245590;4.90913095190146;4.72321844111210;4.54765377822707;4.38261374197992;4.22826451369730;4.08476150996847;3.95224922615395;3.83086109089097;3.72071933174209;3.62193485212246;3.53460711962947;3.45882406588727;3.39466199800713;3.34218552175262;3.30144747648708;3.27248888196889;3.25533889704801;3.25001479030550;3.25652192266556;3.27485374199749;3.30499178971314;3.34690571935314;3.40055332714326;3.46588059448995;3.54282174237255;3.63129929757717;3.73122417070564;3.84249574588097;3.96500198205908;4.09861952584452;4.24321383569698;4.39863931740318;4.56473947067788;4.74134704674646;4.92828421675018;5.12536275080485;5.33238420753230;5.54914013387407;5.77541227498594;6.01097279400208;6.25558450144745;6.50900109406750;6.77096740283467;7.04121964988196;7.31948571410490;7.60548540516441;7.89893074561476;8.19952626087241;8.50696927673390;8.82095022414306;9.14115295090089;9.46725504000396;9.79892813429104;10.1358382670709;10.4776461983985;10.8240077566608;11.1745741851284;11.5289924931241;11.8869058114546;12.2479537517472;12.6117727693309;12.9779965292945;13.3462562753551;13.7161812011647;14.0873988236800;14.4595353582220;14.8322160948450;15.2050657756381];
roadCenters_y =[12.3722659133111;12.4317608396443;12.5029040022143;12.5856237658870;12.6798368388722;12.7854483565915;12.9023519771989;13.0304299886579;13.1695534272677;13.3195822075186;13.4803652631462;13.6517406992426;13.8335359552705;14.0255679788172;14.2276434099129;14.4395587757275;14.6611006954511;14.8920460951498;15.1321624323824;15.3812079303513;15.6389318213505;15.9050745992683;16.1793682808872;16.4615366757206;16.7512956641134;17.0483534833261;17.3524110213153;17.6631621179140;17.9802938731092;18.3034869621055;18.6324159568583;18.9667496537519;19.3061514070938;19.6502794680883;19.9987873289484;20.3513240717999;20.7075347220262;21.0670606056970;21.4295397107232;21.7946070513722;22.1618950357773;22.5310338360719;22.9016517607746;23.2733756290512;23.6458311464761;24.0186432819148;24.3914366451490;24.7638358648622;25.1354659666070;25.5059527503728;25.8749231673732;26.2420056956744;26.6068307142868;26.9690308753414;27.3282414739786;27.6841008155744;28.0362505799368;28.3843361821035;28.7280071293791;29.0669173742514;29.4007256628320;29.7290958784700;30.0516973801931;30.3682053356348;30.6783010481132;30.9816722775314;31.2780135547771;31.5670264893041;31.8484200695856;32.1219109561391;32.3872237668248;32.6440913541317;32.8922550741733;33.1314650471194;33.3614804088042;33.5820695532560;33.7930103659050;33.9940904472334;34.1851073266443;34.3658686663318;34.5361924549493;34.6959071908795;34.8448520549217;34.9828770722234;35.1098432632920;35.2256227839355;35.3300990539909;35.4231668747103;35.5047325346872;35.5747139042162;35.6330405179900;35.6796536460529;35.7145063529361;35.7375635449180;35.7488020053608;35.7482104180876;35.7517895819124;35.7642106212235;35.7884486056388;35.8244791295625;35.8722659133111;35.9317608396443;36.0029040022143;36.0856237658870;36.1798368388722;36.2854483565915;36.4023519771989;36.5304299886579;36.6695534272677;36.8195822075186;36.9803652631462;37.1517406992426;37.3335359552705;37.5255679788172;37.7276434099129;37.9395587757275;38.1611006954511;38.3920460951498;38.6321624323824;38.8812079303513;39.1389318213505;39.4050745992683;39.6793682808872;39.9615366757206;40.2512956641134;40.5483534833261;40.8524110213153;41.1631621179140;41.4802938731092;41.8034869621055;42.1324159568583;42.4667496537519;42.8061514070938;43.1502794680883;43.4987873289484;43.8513240717999;44.2075347220262;44.5670606056970;44.9295397107232;45.2946070513722;45.6618950357773;46.0310338360719;46.4016517607746;46.7733756290512;47.1458311464761;47.5186432819148;47.8914366451490;48.2638358648622;48.6354659666070;49.0059527503728;49.3749231673732;49.7420056956744;50.1068307142868;50.4690308753414;50.8282414739786;51.1841008155744;51.5362505799368;51.8843361821035;52.2280071293791;52.5669173742514;52.9007256628320;53.2290958784700;53.5516973801931;53.8682053356348;54.1783010481132;54.4816722775314;54.7780135547772;55.0670264893041;55.3484200695856;55.6219109561391;55.8872237668248;56.1440913541317;56.3922550741733;56.6314650471194;56.8614804088042;57.0820695532560;57.2930103659050;57.4940904472334;57.6851073266443;57.8658686663318;58.0361924549493;58.1959071908795;58.3448520549217;58.4828770722234;58.6098432632920;58.7256227839355;58.8300990539909;58.9231668747103;59.0047325346872;59.0747139042162;59.1330405179900;59.1796536460529;59.2145063529361;59.2375635449180;59.2488020053608;59.2482104180876;59.2495525960040;59.2403839137344;59.2193936600533;59.1866029703670;59.1420448621205;59.0857642015517;59.0178176585151;58.9382736494200;58.8472122683409;58.7447252063695;58.6309156592899;58.5058982236687;58.3697987814663;58.2227543732843;58.0649130603774;57.8964337755681;57.7174861632147;57.5282504083941;57.3289170554708;57.1196868162341;56.9007703677995;56.6723881404736;56.4347700958004;56.1881554950087;55.9327926580969;55.6689387137957;55.3968593406609;55.1168284995582;54.8291281578074;54.5340480052652;54.2318851626325;53.9229438822784;53.6075352418846;53.2859768312157;52.9585924323341;52.6257116935782;52.2876697976348;51.9448071240386;51.5974689064387;51.2460048849775;50.8907689541324;50.5321188063737;50.1704155719986;49.8060234555040;49.4393093688630;49.0706425620757;48.7003942513660;48.3289372453983;47.9566455698905;47.5838940910020;47.2110581378753;46.8385131247111;46.4666341727586;46.0957957325994;45.7263712071081;45.3587325754673;44.9932500186154;44.6302915465068;44.2702226275560;43.9134058206428;43.5602004100456;43.2109620436730;42.8660423749562;42.5257887087641;42.1905436516964;41.8606447671082;41.5364242352117;41.2182085185998;40.9063180335249;40.6010668272678;40.3027622619181;40.0117047048870;39.7281872264624;39.4524953047124;39.1849065380328;38.9256903656291;38.6751077962141;38.4334111451943;38.2008437806094;37.9776398780817;37.7640241850209;37.5602117943224;37.3664079277873;37.1828077294811;37.0095960692404;36.8469473565245;36.6950253647999;36.5539830666345;36.4239624796669;36.3050945236068;36.1974988884099;36.1012839137603;36.0165464799819;35.9433719104874;35.8818338858656;35.8319943696910;35.7939035461316;35.7675997694180;35.7531095252236;35.7504474039960;35.7482104180876;35.7357893787765;35.7115513943612;35.6755208704375;35.6277340866889;35.5682391603557;35.4970959977857;35.4143762341130;35.3201631611278;35.2145516434085;35.0976480228011;34.9695700113421;34.8304465727323;34.6804177924815;34.5196347368538;34.3482593007574;34.1664640447295;33.9744320211828;33.7723565900871;33.5604412242725;33.3388993045489;33.1079539048502;32.8678375676176;32.6187920696487;32.3610681786495;32.0949254007317;31.8206317191128;31.5384633242794;31.2487043358866;30.9516465166739;30.6475889786847;30.3368378820860;30.0197061268908;29.6965130378945;29.3675840431417;29.0332503462481;28.6938485929062;28.3497205319117;28.0012126710516;27.6486759282001;27.2924652779738;26.9329393943030;26.5704602892768;26.2053929486278;25.8381049642227;25.4689661639281;25.0983482392254;24.7266243709488;24.3541688535240;23.9813567180852;23.6085633548510;23.2361641351378;22.8645340333930;22.4940472496272;22.1250768326268;21.7579943043256;21.3931692857132;21.0309691246586;20.6717585260214;20.3158991844256;19.9637494200632;19.6156638178965;19.2719928706210;18.9330826257487;18.5992743371680;18.2709041215300;17.9483026198069;17.6317946643652;17.3216989518869;17.0183277224686;16.7219864452229;16.4329735106960;16.1515799304144;15.8780890438609;15.6127762331752;15.3559086458683;15.1077449258267;14.8685349528806;14.6385195911958;14.4179304467440;14.2069896340950;14.0059095527666;13.8148926733557;13.6341313336682;13.4638075450507;13.3040928091205;13.1551479450783;13.0171229277766;12.8901567367080;12.7743772160645;12.6699009460091;12.5768331252897;12.4952674653128;12.4252860957838;12.3669594820100;12.3203463539471;12.2854936470639;12.2624364550820;12.2511979946392;12.2517895819124];
roadCenters_z =[0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0];

%r=50
% roadCenters_x=[22.4460576246514;24.0671442243523;25.6791009784084;27.2803047830077;28.8691433616474;30.4440168885588;32.0033395995968;33.5455413889693;35.0690693902014;36.5723895397396;38.0539881216246;39.5123732916739;40.9460765796435;42.3536543678521;43.7336893447822;45.0847919321927;46.4056016843061;47.6947886576623;48.9510547502588;50.1731350086294;51.3597989015453;52.5098515590555;53.6221349756198;54.6955291761218;55.7289533435893;56.7213669074854;57.6717705914745;58.5792074196091;59.4427636799234;60.2615698444637;61.0348014448297;61.7616799023437;62.4414733120140;63.0734971795006;63.6571151103432;64.1917394507568;64.6768318793487;65.1119039491628;65.4965175795042;65.8302854970497;66.1128716257984;66.3439914254725;66.5234121780250;66.6509532219668;66.7264861342779;66.7499348597183;66.7212757874091;66.6405377746068;66.5078021176464;66.3232024700830;66.0869247081137;65.7992067434166;65.4603382835933;65.0706605404580;64.6305658864667;64.1404974596306;63.6009487173143;63.0124629393656;62.3756326810793;61.6910991765435;60.9595516929719;60.1817268366699;59.3584078113343;58.4904236294340;57.5786482774641;56.6239998359163;55.6274395548492;54.5899708859908;53.5126384723485;52.3965270963410;51.2427605875154;50.0525006909454;48.8269458974529;47.5673302368291;46.2749220352712;44.9510226382853;43.5969651003422;42.2141128426040;40.8038582800748;39.3676214195571;37.9068484298246;36.4230101854537;34.9176007857768;33.3921360504514;31.8481519931579;30.2872032749639;28.7108616389127;27.1207143274111;25.5183624840108;23.9054195411925;22.2835095957763;20.6542657735938;19.0193285850690;17.3803442733628;15.7389631567465;14.0968379668706;14.0968379668706;12.4556221846043;10.8169683751204;9.18252652390232;7.55394237534860;5.93285577564763;4.32089902159168;2.71969521699235;1.13085663835265;-0.444016888558833;-2.00333959959677;-3.54554138896929;-5.06906939020135;-6.57238953973964;-8.05398812162457;-9.51237329167395;-10.9460765796435;-12.3536543678521;-13.7336893447822;-15.0847919321927;-16.4056016843061;-17.6947886576623;-18.9510547502588;-20.1731350086294;-21.3597989015453;-22.5098515590555;-23.6221349756198;-24.6955291761218;-25.7289533435893;-26.7213669074854;-27.6717705914745;-28.5792074196091;-29.4427636799234;-30.2615698444637;-31.0348014448297;-31.7616799023437;-32.4414733120140;-33.0734971795006;-33.6571151103432;-34.1917394507568;-34.6768318793487;-35.1119039491628;-35.4965175795042;-35.8302854970497;-36.1128716257984;-36.3439914254725;-36.5234121780250;-36.6509532219668;-36.7264861342779;-36.7499348597183;-36.7212757874091;-36.6405377746068;-36.5078021176464;-36.3232024700830;-36.0869247081137;-35.7992067434166;-35.4603382835932;-35.0706605404580;-34.6305658864667;-34.1404974596306;-33.6009487173143;-33.0124629393656;-32.3756326810793;-31.6910991765435;-30.9595516929719;-30.1817268366699;-29.3584078113343;-28.4904236294340;-27.5786482774641;-26.6239998359163;-25.6274395548492;-24.5899708859908;-23.5126384723485;-22.3965270963410;-21.2427605875154;-20.0525006909454;-18.8269458974529;-17.5673302368291;-16.2749220352712;-14.9510226382853;-13.5969651003422;-12.2141128426040;-10.8038582800748;-9.36762141955706;-7.90684842982456;-6.42301018545371;-4.91760078577683;-3.39213605045143;-1.84815199315786;-0.287203274963860;1.28913836108729;2.87928567258891;4.48163751598917;6.09458045880752;7.71649040422366;9.34573422640618;10.9806714149310;12.6196557266372;14.2610368432535;15.9031620331294;15.4515982120409;17.0932288907025;18.7327518653067;20.3685162751943;21.9988750442624;23.6221865394302;25.2368162236242;26.8411383016188;28.4335373570740;30.0124099791228;31.5761663768702;33.1232319801774;34.6520490251213;36.1610781225297;37.6487998080165;39.1137160719532;40.5543518678376;41.9692565975407;43.3570055719362;44.7162014454411;46.0454756230250;47.3434896382687;48.6089365010870;49.8405420137562;51.0370660539239;52.1973038233065;53.3200870608195;54.4042852189170;55.4488066019572;56.4525994654478;57.4146530750630;58.3339987243679;59.2097107102231;60.0409072648898;60.8267514438950;61.5664519687636;62.2592640237687;62.9044900058982;63.5014802272815;64.0496335693703;64.5483980882142;64.9972715702211;65.3958020378440;65.7435882046840;66.0402798795517;66.2855783190800;66.4792365285333;66.6210595105103;66.7109044612901;66.7486809146231;66.7343508328229;66.6679286450672;66.5494812328686;66.3791278627310;66.1570400660578;65.8834414664347;65.5586075544595;65.1828654103466;64.7565933745848;64.2802206669807;63.7542269544703;63.1791418681356;62.5555444699108;61.8840626695156;61.1653725922040;60.4001978979631;59.5893090528490;58.7335225531925;57.8337001034569;56.8907477485744;55.9056149616358;54.8792936878513;53.8128173457461;52.7072597865954;51.5637342131471;50.3833920587212;49.1674218278139;47.9170478993743;46.6335292939587;45.3181584060036;43.9722597024938;42.5971883893369;41.1943290467855;39.7650942352821;38.3109230731310;36.8332797874276;35.3336522397060;33.8135504277890;32.2745049653476;30.7180655407032;29.1457993564227;27.5592895512783;25.9601336061611;24.3499417355533;22.7303352661785;21.1029450044630;19.4694095944525;17.8313738678361;16.1904871877400;14.5484017879591;14.0968379668706;12.4556221846043;10.8169683751204;9.18252652390233;7.55394237534861;5.93285577564763;4.32089902159168;2.71969521699235;1.13085663835264;-0.444016888558819;-2.00333959959677;-3.54554138896929;-5.06906939020135;-6.57238953973965;-8.05398812162459;-9.51237329167395;-10.9460765796435;-12.3536543678521;-13.7336893447822;-15.0847919321927;-16.4056016843061;-17.6947886576623;-18.9510547502588;-20.1731350086294;-21.3597989015453;-22.5098515590555;-23.6221349756198;-24.6955291761218;-25.7289533435893;-26.7213669074854;-27.6717705914745;-28.5792074196091;-29.4427636799234;-30.2615698444637;-31.0348014448297;-31.7616799023437;-32.4414733120140;-33.0734971795006;-33.6571151103432;-34.1917394507568;-34.6768318793487;-35.1119039491628;-35.4965175795042;-35.8302854970497;-36.1128716257984;-36.3439914254725;-36.5234121780250;-36.6509532219668;-36.7264861342779;-36.7499348597183;-36.7212757874091;-36.6405377746068;-36.5078021176464;-36.3232024700830;-36.0869247081137;-35.7992067434166;-35.4603382835932;-35.0706605404580;-34.6305658864667;-34.1404974596306;-33.6009487173143;-33.0124629393656;-32.3756326810793;-31.6910991765435;-30.9595516929719;-30.1817268366699;-29.3584078113343;-28.4904236294340;-27.5786482774641;-26.6239998359163;-25.6274395548492;-24.5899708859909;-23.5126384723485;-22.3965270963410;-21.2427605875154;-20.0525006909454;-18.8269458974529;-17.5673302368291;-16.2749220352712;-14.9510226382853;-13.5969651003422;-12.2141128426040;-10.8038582800748;-9.36762141955704;-7.90684842982459;-6.42301018545369;-4.91760078577683;-3.39213605045143;-1.84815199315786;-0.287203274963860;1.28913836108729;2.87928567258891;4.48163751598917;6.09458045880752;7.71649040422366;9.34573422640618;10.9806714149310;12.6196557266372;14.2610368432535;15.9031620331294];
% roadCenters_y=[-27.2115097009488;-26.9494788551835;-26.6361462030135;-26.2718272438593;-25.8568888160310;-25.3917487273523;-24.8768753344645;-24.3127870712302;-23.7000519267148;-23.0392868732694;-22.3311572452922;-21.5763760692931;-20.7757033459361;-19.9299452847837;-19.0399534925114;-18.1066241154129;-17.1308969370558;-16.1137544320000;-15.0562207765284;-13.9593608173890;-12.8242789995838;-11.6521182542864;-10.4440588480076;-9.20131719416662;-7.92514462826638;-6.61682614790403;-5.27767911888799;-3.90905194876182;-2.51232272907228;-1.08889784774794;0.359789427014281;1.83228038992866;3.32709236741325;4.84272021051652;6.37763781047476;7.93029963537409;9.49914228637052;11.0825860718995;12.6790365982917;14.2868863751925;15.9045164341681;17.5302979588697;19.1625939251135;20.7997607492255;22.4401499429903;24.0821097735397;25.7239869265072;27.3641281707759;29.0008820231416;30.6326004112166;32.2576403328989;33.8743655107362;35.4811480395183;37.0763700254399;38.6584252151822;40.2257206132744;41.7766780861045;43.3097359509663;44.8233505485418;46.3159977972347;47.7861747277919;49.2324009966659;50.6532203765953;52.0472022229022;53.4129429140302;54.7490672648722;56.0542299114653;57.3271166656583;58.5664458383876;59.7709695302299;60.9394748879304;62.0707853256440;63.1637617096570;64.2173035053982;65.2303498855844;66.2018807983829;67.1309179945177;68.0165260122834;68.8578131194758;69.6539322112909;70.4040816632874;71.1075061385545;71.7634973482724;72.3713947648989;72.9305862872647;73.4405088569074;73.9006490250236;74.3105434694686;74.6697794612820;74.9779952802711;75.2348805792327;75.4401766964458;75.5936769161227;75.6952266765537;75.7447237257382;75.7421182243432;75.7578817756568;75.8125872041121;75.9193374758984;76.0780251025410;76.2884902990512;76.5505211448165;76.8638537969865;77.2281727561407;77.6431111839690;78.1082512726477;78.6231246655355;79.1872129287698;79.7999480732853;80.4607131267306;81.1688427547078;81.9236239307069;82.7242966540639;83.5700547152163;84.4600465074886;85.3933758845871;86.3691030629442;87.3862455680000;88.4437792234716;89.5406391826110;90.6757210004163;91.8478817457136;93.0559411519925;94.2986828058334;95.5748553717337;96.8831738520960;98.2223208811120;99.5909480512382;100.987677270928;102.411102152252;103.859789427014;105.332280389929;106.827092367413;108.342720210517;109.877637810475;111.430299635374;112.999142286371;114.582586071899;116.179036598292;117.786886375192;119.404516434168;121.030297958870;122.662593925114;124.299760749225;125.940149942990;127.582109773540;129.223986926507;130.864128170776;132.500882023142;134.132600411217;135.757640332899;137.374365510736;138.981148039518;140.576370025440;142.158425215182;143.725720613274;145.276678086105;146.809735950966;148.323350548542;149.815997797235;151.286174727792;152.732400996666;154.153220376595;155.547202222902;156.912942914030;158.249067264872;159.554229911465;160.827116665658;162.066445838388;163.270969530230;164.439474887930;165.570785325644;166.663761709657;167.717303505398;168.730349885584;169.701880798383;170.630917994518;171.516526012283;172.357813119476;173.153932211291;173.904081663287;174.607506138554;175.263497348272;175.871394764899;176.430586287265;176.940508856907;177.400649025024;177.810543469469;178.169779461282;178.477995280271;178.734880579233;178.940176696446;179.093676916123;179.195226676554;179.244723725738;179.242118224343;179.248029518571;179.207648300915;179.115201864490;178.970783295021;178.774538009765;178.526663611089;178.227409687503;177.877077562339;177.476019990352;177.024640802521;176.523394499426;175.972785793605;175.373369101351;174.725747984465;174.030574542513;173.288548756225;172.500417782669;171.666975202927;170.789060223031;169.867556828946;168.903392896478;167.897539256980;166.851008719802;165.764855052485;164.640171919703;163.478091782036;162.279784755677;161.046457434225;159.779351673747;158.479743342338;157.148941035424;155.788284758120;154.399144575960;152.982919235354;151.541034755174;150.074942990866;148.586120172562;147.076065418638;145.546299226230;143.998361940220;142.433812202243;140.854225381263;139.261191987313;137.656316069986;136.041213603290;134.417510858503;132.786842766655;131.150851272286;129.511183680156;127.869490996541;126.227426266812;124.586642910962;122.948793058745;121.315525886129;119.688485954710;118.069311555781;116.459633060711;114.861071279296;113.275235827747;111.703723507937;110.148116699563;108.609981766815;107.090867481190;105.592303462004;104.115798636195;102.662839718966;101.234889716784;99.8333864542585;98.4597411263757;97.1153368775412;95.8015274088735;94.5196356151406;93.2709522527174;92.0567346399036;90.8782053909105;89.7365511847921;88.6329215705601;87.5684278096855;86.5441417571521;85.5610947821897;84.6202767297729;83.7226349239308;82.8690732138719;82.0604510638849;81.2975826879311;80.5812362297992;79.9121329896506;79.2909466977307;78.7183028359798;78.1947780082256;77.7208993595924;77.2971440457104;76.9239387522605;76.6016592653380;76.3306300930676;76.1111241388518;75.9433624265797;75.8275138780750;75.7636951430060;75.7519704814291;75.7421182243432;75.6874127958880;75.5806625241016;75.4219748974590;75.2115097009488;74.9494788551835;74.6361462030135;74.2718272438594;73.8568888160310;73.3917487273523;72.8768753344645;72.3127870712302;71.7000519267148;71.0392868732694;70.3311572452922;69.5763760692931;68.7757033459361;67.9299452847837;67.0399534925114;66.1066241154129;65.1308969370558;64.1137544320000;63.0562207765285;61.9593608173890;60.8242789995838;59.6521182542864;58.4440588480075;57.2013171941666;55.9251446282664;54.6168261479040;53.2776791188880;51.9090519487618;50.5123227290723;49.0888978477479;47.6402105729857;46.1677196100713;44.6729076325868;43.1572797894835;41.6223621895253;40.0697003646259;38.5008577136295;36.9174139281005;35.3209634017083;33.7131136248075;32.0954835658320;30.4697020411303;28.8374060748865;27.2002392507745;25.5598500570097;23.9178902264603;22.2760130734928;20.6358718292241;18.9991179768584;17.3673995887834;15.7423596671011;14.1256344892638;12.5188519604817;10.9236299745601;9.34157478481776;7.77427938672558;6.22332191389550;4.69026404903368;3.17664945145823;1.68400220276533;0.213825272208130;-1.23240099666589;-2.65322037659530;-4.04720222290224;-5.41294291403024;-6.74906726487222;-8.05422991146529;-9.32711666565827;-10.5664458383876;-11.7709695302298;-12.9394748879304;-14.0707853256440;-15.1637617096570;-16.2173035053982;-17.2303498855844;-18.2018807983829;-19.1309179945177;-20.0165260122834;-20.8578131194758;-21.6539322112909;-22.4040816632874;-23.1075061385545;-23.7634973482724;-24.3713947648989;-24.9305862872646;-25.4405088569074;-25.9006490250236;-26.3105434694686;-26.6697794612820;-26.9779952802711;-27.2348805792327;-27.4401766964458;-27.5936769161227;-27.6952266765537;-27.7447237257382;-27.7421182243433];
% roadCenters_z=[0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0];

roadCenters = [roadCenters_x roadCenters_y roadCenters_z];
road(scenario, roadCenters, 'Name', 'Road');

% Add the ego vehicle
egoVehicle = vehicle(scenario, ...
    'ClassID', 1, ...
    'Position', [-30 -5.7 0], ...
    'Mesh', driving.scenario.carMesh, ...
    'Name', 'Car');


% r=10
waypoints_x =[15.2050657756381;15.5777089725778;15.9497704655524;16.3208756201768;16.6906507650175;17.0587235678481;17.4247234105565;17.7882817623254;18.1490325507122;18.5066125302525;18.8606616482176;19.2108234071573;19.5567452238621;19.8980787843853;20.2344803947650;20.5656113270950;20.8911381605954;21.2107331173384;21.5240743922936;21.8308464773578;22.1307404790454;22.4234544295175;22.7086935906385;22.9861707507516;23.2556065138774;23.5167295810416;23.7692770234499;24.0129945472354;24.2476367495106;24.4729673654677;24.6887595062768;24.8947958875441;25.0908690480985;25.2767815588879;25.4523462217729;25.6173862580201;25.7717354863027;25.9152384900315;26.0477507738460;26.1691389091090;26.2792806682579;26.3780651478775;26.4653928803705;26.5411759341127;26.6053380019929;26.6578144782474;26.6985525235129;26.7275111180311;26.7446611029520;26.7499852096945;26.7434780773344;26.7251462580025;26.6950082102869;26.6530942806469;26.5994466728567;26.5341194055101;26.4571782576274;26.3687007024228;26.2687758292944;26.1575042541190;26.0349980179409;25.9013804741555;25.7567861643030;25.6013606825968;25.4352605293221;25.2586529532535;25.0717157832498;24.8746372491952;24.6676157924677;24.4508598661259;24.2245877250141;23.9890272059979;23.7444154985526;23.4909989059325;23.2290325971653;22.9587803501180;22.6805142858951;22.3945145948356;22.1010692543852;21.8004737391276;21.4930307232661;21.1790497758569;20.8588470490991;20.5327449599960;20.2010718657090;19.8641617329291;19.5223538016015;19.1759922433392;18.8254258148716;18.4710075068759;18.1130941885454;17.7520462482528;17.3882272306691;17.0220034707055;16.6537437246449;16.2838187988353;15.9126011763200;15.5404646417780;15.1677839051550;14.7949342243619;14.7949342243619;14.4222910274222;14.0502295344476;13.6791243798232;13.3093492349825;12.9412764321519;12.5752765894435;12.2117182376746;11.8509674492878;11.4933874697475;11.1393383517824;10.7891765928427;10.4432547761379;10.1019212156147;9.76551960523500;9.43438867290495;9.10886183940462;8.78926688266161;8.47592560770645;8.16915352264223;7.86925952095464;7.57654557048247;7.29130640936154;7.01382924924840;6.74439348612257;6.48327041895841;6.23072297655010;5.98700545276462;5.75236325048938;5.52703263453230;5.31124049372317;5.10520411245590;4.90913095190146;4.72321844111210;4.54765377822707;4.38261374197992;4.22826451369730;4.08476150996847;3.95224922615395;3.83086109089097;3.72071933174209;3.62193485212246;3.53460711962947;3.45882406588727;3.39466199800713;3.34218552175262;3.30144747648708;3.27248888196889;3.25533889704801;3.25001479030550;3.25652192266556;3.27485374199749;3.30499178971314;3.34690571935314;3.40055332714326;3.46588059448995;3.54282174237255;3.63129929757717;3.73122417070564;3.84249574588097;3.96500198205908;4.09861952584452;4.24321383569698;4.39863931740318;4.56473947067788;4.74134704674646;4.92828421675018;5.12536275080485;5.33238420753230;5.54914013387407;5.77541227498594;6.01097279400208;6.25558450144744;6.50900109406750;6.77096740283466;7.04121964988196;7.31948571410490;7.60548540516441;7.89893074561476;8.19952626087241;8.50696927673390;8.82095022414305;9.14115295090089;9.46725504000395;9.79892813429104;10.1358382670709;10.4776461983985;10.8240077566608;11.1745741851284;11.5289924931241;11.8869058114546;12.2479537517472;12.6117727693309;12.9779965292945;13.3462562753551;13.7161812011647;14.0873988236800;14.4595353582220;14.8322160948450;15.2050657756381;15.1025367921059;15.4752741925750;15.8475330322194;16.2189384779427;16.5891165559436;16.9576945282764;17.3243012681659;17.6885676337009;18.0501268395289;18.4086148261776;18.7636706266324;19.1149367297987;19.4620594404865;19.8046892355502;20.1424811158298;20.4750949535353;20.8021958347264;21.1234543965431;21.4385471588454;21.7471568499311;22.0489727260008;22.3436908840514;22.6310145678797;22.9106544668915;23.1823290074127;23.4457646362097;23.7006960959349;23.9468666922179;24.1840285521352;24.4119428737973;24.6303801668018;24.8391204833106;25.0379536395193;25.2266794272938;25.4051078157636;25.5730591426661;25.7303642952518;25.8768648805663;26.0124133849383;26.1368733225140;26.2501193726863;26.3520375062821;26.4425251003800;26.5214910416432;26.5888558180625;26.6445515990182;26.6885223035800;26.7207236569758;26.7411232351722;26.7497004975231;26.7464468074525;26.7313654411505;26.7044715842745;26.6657923166587;26.6153665850469;26.5532451638765;26.4794906041526;26.3941771704652;26.2973907662101;26.1892288470922;26.0698003229957;25.9392254483207;25.7976357008976;25.6451736496002;25.4819928107903;25.3082574937404;25.1241426351879;24.9298336231886;24.7255261104467;24.5114258173092;24.2877483246226;24.0547188566619;23.8125720543481;23.5615517389854;23.3019106667532;23.0339102742024;22.7578204150109;22.4739190882637;22.1824921585317;21.8838330680298;21.5782425411459;21.2660282816369;20.9475046627967;20.6229924109095;20.2928182823051;19.9573147343435;19.6168195906579;19.2716757009956;18.9222305959968;18.5688361372611;18.2118481630525;17.8516261300004;17.4885327511574;17.1229336307778;16.7551968961854;16.3856928271003;16.0147934827984;15.6428723274797;15.2703038542212;14.8974632078941;14.7949342243619;14.4222910274222;14.0502295344476;13.6791243798232;13.3093492349825;12.9412764321519;12.5752765894435;12.2117182376746;11.8509674492878;11.4933874697475;11.1393383517824;10.7891765928427;10.4432547761379;10.1019212156147;9.76551960523500;9.43438867290495;9.10886183940462;8.78926688266161;8.47592560770645;8.16915352264223;7.86925952095464;7.57654557048247;7.29130640936154;7.01382924924840;6.74439348612257;6.48327041895841;6.23072297655010;5.98700545276462;5.75236325048938;5.52703263453230;5.31124049372317;5.10520411245590;4.90913095190146;4.72321844111210;4.54765377822707;4.38261374197992;4.22826451369730;4.08476150996847;3.95224922615395;3.83086109089097;3.72071933174209;3.62193485212246;3.53460711962947;3.45882406588727;3.39466199800713;3.34218552175262;3.30144747648708;3.27248888196889;3.25533889704801;3.25001479030550;3.25652192266556;3.27485374199749;3.30499178971314;3.34690571935314;3.40055332714326;3.46588059448995;3.54282174237255;3.63129929757717;3.73122417070564;3.84249574588097;3.96500198205908;4.09861952584452;4.24321383569698;4.39863931740318;4.56473947067788;4.74134704674646;4.92828421675018;5.12536275080485;5.33238420753230;5.54914013387407;5.77541227498594;6.01097279400208;6.25558450144745;6.50900109406750;6.77096740283467;7.04121964988196;7.31948571410490;7.60548540516441;7.89893074561476;8.19952626087241;8.50696927673390;8.82095022414306;9.14115295090089;9.46725504000396;9.79892813429104;10.1358382670709;10.4776461983985;10.8240077566608;11.1745741851284;11.5289924931241;11.8869058114546;12.2479537517472;12.6117727693309;12.9779965292945;13.3462562753551;13.7161812011647;14.0873988236800;14.4595353582220;14.8322160948450;15.2050657756381];
waypoints_y =[12.2517895819124;12.2642106212235;12.2884486056388;12.3244791295625;12.3722659133111;12.4317608396443;12.5029040022143;12.5856237658870;12.6798368388722;12.7854483565915;12.9023519771989;13.0304299886579;13.1695534272677;13.3195822075186;13.4803652631462;13.6517406992426;13.8335359552705;14.0255679788172;14.2276434099129;14.4395587757275;14.6611006954511;14.8920460951498;15.1321624323824;15.3812079303513;15.6389318213505;15.9050745992683;16.1793682808872;16.4615366757206;16.7512956641134;17.0483534833261;17.3524110213153;17.6631621179140;17.9802938731092;18.3034869621055;18.6324159568583;18.9667496537519;19.3061514070938;19.6502794680883;19.9987873289484;20.3513240717999;20.7075347220262;21.0670606056970;21.4295397107232;21.7946070513722;22.1618950357773;22.5310338360719;22.9016517607746;23.2733756290512;23.6458311464761;24.0186432819148;24.3914366451490;24.7638358648622;25.1354659666070;25.5059527503728;25.8749231673732;26.2420056956744;26.6068307142868;26.9690308753414;27.3282414739786;27.6841008155744;28.0362505799368;28.3843361821035;28.7280071293791;29.0669173742514;29.4007256628320;29.7290958784700;30.0516973801931;30.3682053356348;30.6783010481132;30.9816722775314;31.2780135547771;31.5670264893041;31.8484200695856;32.1219109561391;32.3872237668248;32.6440913541317;32.8922550741733;33.1314650471194;33.3614804088042;33.5820695532560;33.7930103659050;33.9940904472334;34.1851073266443;34.3658686663318;34.5361924549493;34.6959071908795;34.8448520549217;34.9828770722234;35.1098432632920;35.2256227839355;35.3300990539909;35.4231668747103;35.5047325346872;35.5747139042162;35.6330405179900;35.6796536460529;35.7145063529361;35.7375635449180;35.7488020053608;35.7482104180876;35.7517895819124;35.7642106212235;35.7884486056388;35.8244791295625;35.8722659133111;35.9317608396443;36.0029040022143;36.0856237658870;36.1798368388722;36.2854483565915;36.4023519771989;36.5304299886579;36.6695534272677;36.8195822075186;36.9803652631462;37.1517406992426;37.3335359552705;37.5255679788172;37.7276434099129;37.9395587757275;38.1611006954511;38.3920460951498;38.6321624323824;38.8812079303513;39.1389318213505;39.4050745992683;39.6793682808872;39.9615366757206;40.2512956641134;40.5483534833261;40.8524110213153;41.1631621179140;41.4802938731092;41.8034869621055;42.1324159568583;42.4667496537519;42.8061514070938;43.1502794680883;43.4987873289484;43.8513240717999;44.2075347220262;44.5670606056970;44.9295397107232;45.2946070513722;45.6618950357773;46.0310338360719;46.4016517607746;46.7733756290512;47.1458311464761;47.5186432819148;47.8914366451490;48.2638358648622;48.6354659666070;49.0059527503728;49.3749231673732;49.7420056956744;50.1068307142868;50.4690308753414;50.8282414739786;51.1841008155744;51.5362505799368;51.8843361821035;52.2280071293791;52.5669173742514;52.9007256628320;53.2290958784700;53.5516973801931;53.8682053356348;54.1783010481132;54.4816722775314;54.7780135547772;55.0670264893041;55.3484200695856;55.6219109561391;55.8872237668248;56.1440913541317;56.3922550741733;56.6314650471194;56.8614804088042;57.0820695532560;57.2930103659050;57.4940904472334;57.6851073266443;57.8658686663318;58.0361924549493;58.1959071908795;58.3448520549217;58.4828770722234;58.6098432632920;58.7256227839355;58.8300990539909;58.9231668747103;59.0047325346872;59.0747139042162;59.1330405179900;59.1796536460529;59.2145063529361;59.2375635449180;59.2488020053608;59.2482104180876;59.2495525960040;59.2403839137344;59.2193936600533;59.1866029703670;59.1420448621205;59.0857642015517;59.0178176585151;58.9382736494200;58.8472122683409;58.7447252063695;58.6309156592899;58.5058982236687;58.3697987814663;58.2227543732843;58.0649130603774;57.8964337755681;57.7174861632147;57.5282504083941;57.3289170554708;57.1196868162341;56.9007703677995;56.6723881404736;56.4347700958004;56.1881554950087;55.9327926580969;55.6689387137957;55.3968593406609;55.1168284995582;54.8291281578074;54.5340480052652;54.2318851626325;53.9229438822784;53.6075352418846;53.2859768312157;52.9585924323341;52.6257116935782;52.2876697976348;51.9448071240386;51.5974689064387;51.2460048849775;50.8907689541324;50.5321188063737;50.1704155719986;49.8060234555040;49.4393093688630;49.0706425620757;48.7003942513660;48.3289372453983;47.9566455698905;47.5838940910020;47.2110581378753;46.8385131247111;46.4666341727586;46.0957957325994;45.7263712071081;45.3587325754673;44.9932500186154;44.6302915465068;44.2702226275560;43.9134058206428;43.5602004100456;43.2109620436730;42.8660423749562;42.5257887087641;42.1905436516964;41.8606447671082;41.5364242352117;41.2182085185998;40.9063180335249;40.6010668272678;40.3027622619181;40.0117047048870;39.7281872264624;39.4524953047124;39.1849065380328;38.9256903656291;38.6751077962141;38.4334111451943;38.2008437806094;37.9776398780817;37.7640241850209;37.5602117943224;37.3664079277873;37.1828077294811;37.0095960692404;36.8469473565245;36.6950253647999;36.5539830666345;36.4239624796669;36.3050945236068;36.1974988884099;36.1012839137603;36.0165464799819;35.9433719104874;35.8818338858656;35.8319943696910;35.7939035461316;35.7675997694180;35.7531095252236;35.7504474039960;35.7482104180876;35.7357893787765;35.7115513943612;35.6755208704375;35.6277340866889;35.5682391603557;35.4970959977857;35.4143762341130;35.3201631611278;35.2145516434085;35.0976480228011;34.9695700113421;34.8304465727323;34.6804177924815;34.5196347368538;34.3482593007574;34.1664640447295;33.9744320211828;33.7723565900871;33.5604412242725;33.3388993045489;33.1079539048502;32.8678375676176;32.6187920696487;32.3610681786495;32.0949254007317;31.8206317191128;31.5384633242794;31.2487043358866;30.9516465166739;30.6475889786847;30.3368378820860;30.0197061268908;29.6965130378945;29.3675840431417;29.0332503462481;28.6938485929062;28.3497205319117;28.0012126710516;27.6486759282001;27.2924652779738;26.9329393943030;26.5704602892768;26.2053929486278;25.8381049642227;25.4689661639281;25.0983482392254;24.7266243709488;24.3541688535240;23.9813567180852;23.6085633548510;23.2361641351378;22.8645340333930;22.4940472496272;22.1250768326268;21.7579943043256;21.3931692857132;21.0309691246586;20.6717585260214;20.3158991844256;19.9637494200632;19.6156638178965;19.2719928706210;18.9330826257487;18.5992743371680;18.2709041215300;17.9483026198069;17.6317946643652;17.3216989518869;17.0183277224686;16.7219864452229;16.4329735106960;16.1515799304144;15.8780890438609;15.6127762331752;15.3559086458683;15.1077449258267;14.8685349528806;14.6385195911958;14.4179304467440;14.2069896340950;14.0059095527666;13.8148926733557;13.6341313336682;13.4638075450507;13.3040928091205;13.1551479450783;13.0171229277766;12.8901567367080;12.7743772160645;12.6699009460091;12.5768331252897;12.4952674653128;12.4252860957838;12.3669594820100;12.3203463539471;12.2854936470639;12.2624364550820;12.2511979946392;12.2517895819124];
waypoints_z =[0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0]

% %r=50
% waypoints_x=[15.9031620331294;17.5443778153957;19.1830316248796;20.8174734760977;22.4460576246514;24.0671442243523;25.6791009784084;27.2803047830077;28.8691433616474;30.4440168885588;32.0033395995968;33.5455413889693;35.0690693902014;36.5723895397396;38.0539881216246;39.5123732916739;40.9460765796435;42.3536543678521;43.7336893447822;45.0847919321927;46.4056016843061;47.6947886576623;48.9510547502588;50.1731350086294;51.3597989015453;52.5098515590555;53.6221349756198;54.6955291761218;55.7289533435893;56.7213669074854;57.6717705914745;58.5792074196091;59.4427636799234;60.2615698444637;61.0348014448297;61.7616799023437;62.4414733120140;63.0734971795006;63.6571151103432;64.1917394507568;64.6768318793487;65.1119039491628;65.4965175795042;65.8302854970497;66.1128716257984;66.3439914254725;66.5234121780250;66.6509532219668;66.7264861342779;66.7499348597183;66.7212757874091;66.6405377746068;66.5078021176464;66.3232024700830;66.0869247081137;65.7992067434166;65.4603382835933;65.0706605404580;64.6305658864667;64.1404974596306;63.6009487173143;63.0124629393656;62.3756326810793;61.6910991765435;60.9595516929719;60.1817268366699;59.3584078113343;58.4904236294340;57.5786482774641;56.6239998359163;55.6274395548492;54.5899708859908;53.5126384723485;52.3965270963410;51.2427605875154;50.0525006909454;48.8269458974529;47.5673302368291;46.2749220352712;44.9510226382853;43.5969651003422;42.2141128426040;40.8038582800748;39.3676214195571;37.9068484298246;36.4230101854537;34.9176007857768;33.3921360504514;31.8481519931579;30.2872032749639;28.7108616389127;27.1207143274111;25.5183624840108;23.9054195411925;22.2835095957763;20.6542657735938;19.0193285850690;17.3803442733628;15.7389631567465;14.0968379668706;14.0968379668706;12.4556221846043;10.8169683751204;9.18252652390232;7.55394237534860;5.93285577564763;4.32089902159168;2.71969521699235;1.13085663835265;-0.444016888558833;-2.00333959959677;-3.54554138896929;-5.06906939020135;-6.57238953973964;-8.05398812162457;-9.51237329167395;-10.9460765796435;-12.3536543678521;-13.7336893447822;-15.0847919321927;-16.4056016843061;-17.6947886576623;-18.9510547502588;-20.1731350086294;-21.3597989015453;-22.5098515590555;-23.6221349756198;-24.6955291761218;-25.7289533435893;-26.7213669074854;-27.6717705914745;-28.5792074196091;-29.4427636799234;-30.2615698444637;-31.0348014448297;-31.7616799023437;-32.4414733120140;-33.0734971795006;-33.6571151103432;-34.1917394507568;-34.6768318793487;-35.1119039491628;-35.4965175795042;-35.8302854970497;-36.1128716257984;-36.3439914254725;-36.5234121780250;-36.6509532219668;-36.7264861342779;-36.7499348597183;-36.7212757874091;-36.6405377746068;-36.5078021176464;-36.3232024700830;-36.0869247081137;-35.7992067434166;-35.4603382835932;-35.0706605404580;-34.6305658864667;-34.1404974596306;-33.6009487173143;-33.0124629393656;-32.3756326810793;-31.6910991765435;-30.9595516929719;-30.1817268366699;-29.3584078113343;-28.4904236294340;-27.5786482774641;-26.6239998359163;-25.6274395548492;-24.5899708859908;-23.5126384723485;-22.3965270963410;-21.2427605875154;-20.0525006909454;-18.8269458974529;-17.5673302368291;-16.2749220352712;-14.9510226382853;-13.5969651003422;-12.2141128426040;-10.8038582800748;-9.36762141955706;-7.90684842982456;-6.42301018545371;-4.91760078577683;-3.39213605045143;-1.84815199315786;-0.287203274963860;1.28913836108729;2.87928567258891;4.48163751598917;6.09458045880752;7.71649040422366;9.34573422640618;10.9806714149310;12.6196557266372;14.2610368432535;15.9031620331294;15.4515982120409;17.0932288907025;18.7327518653067;20.3685162751943;21.9988750442624;23.6221865394302;25.2368162236242;26.8411383016188;28.4335373570740;30.0124099791228;31.5761663768702;33.1232319801774;34.6520490251213;36.1610781225297;37.6487998080165;39.1137160719532;40.5543518678376;41.9692565975407;43.3570055719362;44.7162014454411;46.0454756230250;47.3434896382687;48.6089365010870;49.8405420137562;51.0370660539239;52.1973038233065;53.3200870608195;54.4042852189170;55.4488066019572;56.4525994654478;57.4146530750630;58.3339987243679;59.2097107102231;60.0409072648898;60.8267514438950;61.5664519687636;62.2592640237687;62.9044900058982;63.5014802272815;64.0496335693703;64.5483980882142;64.9972715702211;65.3958020378440;65.7435882046840;66.0402798795517;66.2855783190800;66.4792365285333;66.6210595105103;66.7109044612901;66.7486809146231;66.7343508328229;66.6679286450672;66.5494812328686;66.3791278627310;66.1570400660578;65.8834414664347;65.5586075544595;65.1828654103466;64.7565933745848;64.2802206669807;63.7542269544703;63.1791418681356;62.5555444699108;61.8840626695156;61.1653725922040;60.4001978979631;59.5893090528490;58.7335225531925;57.8337001034569;56.8907477485744;55.9056149616358;54.8792936878513;53.8128173457461;52.7072597865954;51.5637342131471;50.3833920587212;49.1674218278139;47.9170478993743;46.6335292939587;45.3181584060036;43.9722597024938;42.5971883893369;41.1943290467855;39.7650942352821;38.3109230731310;36.8332797874276;35.3336522397060;33.8135504277890;32.2745049653476;30.7180655407032;29.1457993564227;27.5592895512783;25.9601336061611;24.3499417355533;22.7303352661785;21.1029450044630;19.4694095944525;17.8313738678361;16.1904871877400;14.5484017879591;14.0968379668706;12.4556221846043;10.8169683751204;9.18252652390233;7.55394237534861;5.93285577564763;4.32089902159168;2.71969521699235;1.13085663835264;-0.444016888558819;-2.00333959959677;-3.54554138896929;-5.06906939020135;-6.57238953973965;-8.05398812162459;-9.51237329167395;-10.9460765796435;-12.3536543678521;-13.7336893447822;-15.0847919321927;-16.4056016843061;-17.6947886576623;-18.9510547502588;-20.1731350086294;-21.3597989015453;-22.5098515590555;-23.6221349756198;-24.6955291761218;-25.7289533435893;-26.7213669074854;-27.6717705914745;-28.5792074196091;-29.4427636799234;-30.2615698444637;-31.0348014448297;-31.7616799023437;-32.4414733120140;-33.0734971795006;-33.6571151103432;-34.1917394507568;-34.6768318793487;-35.1119039491628;-35.4965175795042;-35.8302854970497;-36.1128716257984;-36.3439914254725;-36.5234121780250;-36.6509532219668;-36.7264861342779;-36.7499348597183;-36.7212757874091;-36.6405377746068;-36.5078021176464;-36.3232024700830;-36.0869247081137;-35.7992067434166;-35.4603382835932;-35.0706605404580;-34.6305658864667;-34.1404974596306;-33.6009487173143;-33.0124629393656;-32.3756326810793;-31.6910991765435;-30.9595516929719;-30.1817268366699;-29.3584078113343;-28.4904236294340;-27.5786482774641;-26.6239998359163;-25.6274395548492;-24.5899708859909;-23.5126384723485;-22.3965270963410;-21.2427605875154;-20.0525006909454;-18.8269458974529;-17.5673302368291;-16.2749220352712;-14.9510226382853;-13.5969651003422;-12.2141128426040;-10.8038582800748;-9.36762141955704;-7.90684842982459;-6.42301018545369;-4.91760078577683;-3.39213605045143;-1.84815199315786;-0.287203274963860;1.28913836108729;2.87928567258891;4.48163751598917;6.09458045880752;7.71649040422366;9.34573422640618;10.9806714149310;12.6196557266372;14.2610368432535;15.9031620331294];
% waypoints_y = [-27.7421182243433;-27.6874127958880;-27.5806625241016;-27.4219748974590;-27.2115097009488;-26.9494788551835;-26.6361462030135;-26.2718272438593;-25.8568888160310;-25.3917487273523;-24.8768753344645;-24.3127870712302;-23.7000519267148;-23.0392868732694;-22.3311572452922;-21.5763760692931;-20.7757033459361;-19.9299452847837;-19.0399534925114;-18.1066241154129;-17.1308969370558;-16.1137544320000;-15.0562207765284;-13.9593608173890;-12.8242789995838;-11.6521182542864;-10.4440588480076;-9.20131719416662;-7.92514462826638;-6.61682614790403;-5.27767911888799;-3.90905194876182;-2.51232272907228;-1.08889784774794;0.359789427014281;1.83228038992866;3.32709236741325;4.84272021051652;6.37763781047476;7.93029963537409;9.49914228637052;11.0825860718995;12.6790365982917;14.2868863751925;15.9045164341681;17.5302979588697;19.1625939251135;20.7997607492255;22.4401499429903;24.0821097735397;25.7239869265072;27.3641281707759;29.0008820231416;30.6326004112166;32.2576403328989;33.8743655107362;35.4811480395183;37.0763700254399;38.6584252151822;40.2257206132744;41.7766780861045;43.3097359509663;44.8233505485418;46.3159977972347;47.7861747277919;49.2324009966659;50.6532203765953;52.0472022229022;53.4129429140302;54.7490672648722;56.0542299114653;57.3271166656583;58.5664458383876;59.7709695302299;60.9394748879304;62.0707853256440;63.1637617096570;64.2173035053982;65.2303498855844;66.2018807983829;67.1309179945177;68.0165260122834;68.8578131194758;69.6539322112909;70.4040816632874;71.1075061385545;71.7634973482724;72.3713947648989;72.9305862872647;73.4405088569074;73.9006490250236;74.3105434694686;74.6697794612820;74.9779952802711;75.2348805792327;75.4401766964458;75.5936769161227;75.6952266765537;75.7447237257382;75.7421182243432;75.7578817756568;75.8125872041121;75.9193374758984;76.0780251025410;76.2884902990512;76.5505211448165;76.8638537969865;77.2281727561407;77.6431111839690;78.1082512726477;78.6231246655355;79.1872129287698;79.7999480732853;80.4607131267306;81.1688427547078;81.9236239307069;82.7242966540639;83.5700547152163;84.4600465074886;85.3933758845871;86.3691030629442;87.3862455680000;88.4437792234716;89.5406391826110;90.6757210004163;91.8478817457136;93.0559411519925;94.2986828058334;95.5748553717337;96.8831738520960;98.2223208811120;99.5909480512382;100.987677270928;102.411102152252;103.859789427014;105.332280389929;106.827092367413;108.342720210517;109.877637810475;111.430299635374;112.999142286371;114.582586071899;116.179036598292;117.786886375192;119.404516434168;121.030297958870;122.662593925114;124.299760749225;125.940149942990;127.582109773540;129.223986926507;130.864128170776;132.500882023142;134.132600411217;135.757640332899;137.374365510736;138.981148039518;140.576370025440;142.158425215182;143.725720613274;145.276678086105;146.809735950966;148.323350548542;149.815997797235;151.286174727792;152.732400996666;154.153220376595;155.547202222902;156.912942914030;158.249067264872;159.554229911465;160.827116665658;162.066445838388;163.270969530230;164.439474887930;165.570785325644;166.663761709657;167.717303505398;168.730349885584;169.701880798383;170.630917994518;171.516526012283;172.357813119476;173.153932211291;173.904081663287;174.607506138554;175.263497348272;175.871394764899;176.430586287265;176.940508856907;177.400649025024;177.810543469469;178.169779461282;178.477995280271;178.734880579233;178.940176696446;179.093676916123;179.195226676554;179.244723725738;179.242118224343;179.248029518571;179.207648300915;179.115201864490;178.970783295021;178.774538009765;178.526663611089;178.227409687503;177.877077562339;177.476019990352;177.024640802521;176.523394499426;175.972785793605;175.373369101351;174.725747984465;174.030574542513;173.288548756225;172.500417782669;171.666975202927;170.789060223031;169.867556828946;168.903392896478;167.897539256980;166.851008719802;165.764855052485;164.640171919703;163.478091782036;162.279784755677;161.046457434225;159.779351673747;158.479743342338;157.148941035424;155.788284758120;154.399144575960;152.982919235354;151.541034755174;150.074942990866;148.586120172562;147.076065418638;145.546299226230;143.998361940220;142.433812202243;140.854225381263;139.261191987313;137.656316069986;136.041213603290;134.417510858503;132.786842766655;131.150851272286;129.511183680156;127.869490996541;126.227426266812;124.586642910962;122.948793058745;121.315525886129;119.688485954710;118.069311555781;116.459633060711;114.861071279296;113.275235827747;111.703723507937;110.148116699563;108.609981766815;107.090867481190;105.592303462004;104.115798636195;102.662839718966;101.234889716784;99.8333864542585;98.4597411263757;97.1153368775412;95.8015274088735;94.5196356151406;93.2709522527174;92.0567346399036;90.8782053909105;89.7365511847921;88.6329215705601;87.5684278096855;86.5441417571521;85.5610947821897;84.6202767297729;83.7226349239308;82.8690732138719;82.0604510638849;81.2975826879311;80.5812362297992;79.9121329896506;79.2909466977307;78.7183028359798;78.1947780082256;77.7208993595924;77.2971440457104;76.9239387522605;76.6016592653380;76.3306300930676;76.1111241388518;75.9433624265797;75.8275138780750;75.7636951430060;75.7519704814291;75.7421182243432;75.6874127958880;75.5806625241016;75.4219748974590;75.2115097009488;74.9494788551835;74.6361462030135;74.2718272438594;73.8568888160310;73.3917487273523;72.8768753344645;72.3127870712302;71.7000519267148;71.0392868732694;70.3311572452922;69.5763760692931;68.7757033459361;67.9299452847837;67.0399534925114;66.1066241154129;65.1308969370558;64.1137544320000;63.0562207765285;61.9593608173890;60.8242789995838;59.6521182542864;58.4440588480075;57.2013171941666;55.9251446282664;54.6168261479040;53.2776791188880;51.9090519487618;50.5123227290723;49.0888978477479;47.6402105729857;46.1677196100713;44.6729076325868;43.1572797894835;41.6223621895253;40.0697003646259;38.5008577136295;36.9174139281005;35.3209634017083;33.7131136248075;32.0954835658320;30.4697020411303;28.8374060748865;27.2002392507745;25.5598500570097;23.9178902264603;22.2760130734928;20.6358718292241;18.9991179768584;17.3673995887834;15.7423596671011;14.1256344892638;12.5188519604817;10.9236299745601;9.34157478481776;7.77427938672558;6.22332191389550;4.69026404903368;3.17664945145823;1.68400220276533;0.213825272208130;-1.23240099666589;-2.65322037659530;-4.04720222290224;-5.41294291403024;-6.74906726487222;-8.05422991146529;-9.32711666565827;-10.5664458383876;-11.7709695302298;-12.9394748879304;-14.0707853256440;-15.1637617096570;-16.2173035053982;-17.2303498855844;-18.2018807983829;-19.1309179945177;-20.0165260122834;-20.8578131194758;-21.6539322112909;-22.4040816632874;-23.1075061385545;-23.7634973482724;-24.3713947648989;-24.9305862872646;-25.4405088569074;-25.9006490250236;-26.3105434694686;-26.6697794612820;-26.9779952802711;-27.2348805792327;-27.4401766964458;-27.5936769161227;-27.6952266765537;-27.7447237257382;-27.7421182243433];
% waypoints_z=[0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0];
waypoints = [waypoints_x waypoints_y waypoints_z];

speed = 10*ones(1,400);
trajectory(egoVehicle, waypoints, speed);

